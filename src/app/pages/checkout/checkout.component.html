<!-- src/app/pages/checkout/checkout.component.html -->
<div class="checkout-page">
  <div class="container">
    
    <!-- Order Confirmation -->
    <div class="order-confirmation" *ngIf="orderComplete">
      <div class="success-animation">
        <div class="checkmark">‚úì</div>
      </div>
      <h1>Commande confirm√©e !</h1>
      <p class="order-number">Num√©ro de commande: <strong>{{ orderNumber }}</strong></p>
      <p class="success-message">
        Votre commande a √©t√© re√ßue et sera livr√©e dans 30-45 minutes.
        <br>Merci pour votre confiance !
      </p>
      <button class="btn btn-primary" (click)="goToHome()">
        Retour √† l'accueil
      </button>
    </div>

    <!-- Checkout Form -->
    <div class="checkout-content" *ngIf="!orderComplete">
      <h1 class="page-title fade-in">Finaliser la commande</h1>

      <div class="checkout-grid">
        <!-- Left: Forms -->
        <div class="checkout-forms">
          
          <!-- Delivery Info -->
          <div class="form-section fade-in">
            <h2>üìç Informations de livraison</h2>
            <div class="form-group">
              <label>Nom complet *</label>
              <input 
                type="text" 
                [(ngModel)]="customerName"
                placeholder="Entrez votre nom"
              />
            </div>
            <div class="form-group">
              <label>T√©l√©phone *</label>
              <input 
                type="tel" 
                [(ngModel)]="phone"
                placeholder="+225 XX XX XX XX XX"
              />
            </div>
            <div class="form-group">
              <label>Adresse de livraison *</label>
              <textarea 
                [(ngModel)]="address"
                placeholder="Commune, quartier, rep√®res..."
                rows="3"
              ></textarea>
            </div>
            <div class="form-group">
              <label>Instructions sp√©ciales (optionnel)</label>
              <textarea 
                [(ngModel)]="notes"
                placeholder="Allergies, pr√©f√©rences..."
                rows="2"
              ></textarea>
            </div>
          </div>

          <!-- Payment Method -->
          <div class="form-section fade-in" style="animation-delay: 0.2s">
            <h2>üí≥ Mode de paiement</h2>
            <div class="payment-methods">
              <div 
                class="payment-option"
                [class.active]="paymentMethod === 'mobile'"
                (click)="selectPaymentMethod('mobile')"
              >
                <span class="payment-icon">üì±</span>
                <div class="payment-info">
                  <strong>Mobile Money</strong>
                  <small>MTN, Moov, Orange</small>
                </div>
              </div>

              <div 
                class="payment-option"
                [class.active]="paymentMethod === 'card'"
                (click)="selectPaymentMethod('card')"
              >
                <span class="payment-icon">üí≥</span>
                <div class="payment-info">
                  <strong>Carte bancaire</strong>
                  <small>Visa, Mastercard</small>
                </div>
              </div>

              <div 
                class="payment-option"
                [class.active]="paymentMethod === 'cash'"
                (click)="selectPaymentMethod('cash')"
              >
                <span class="payment-icon">üíµ</span>
                <div class="payment-info">
                  <strong>Esp√®ces</strong>
                  <small>√Ä la livraison</small>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Right: Order Summary -->
        <div class="order-summary-sticky">
          <div class="order-summary fade-in" style="animation-delay: 0.3s">
            <h2>Votre commande</h2>

            <div class="order-items">
              <div class="order-item" *ngFor="let item of cartItems">
                <div class="item-info">
                  <span class="item-name">{{ item.dish.name }}</span>
                  <span class="item-qty">x{{ item.quantity }}</span>
                </div>
                <span class="item-price">{{ item.dish.price * item.quantity }} FCFA</span>
              </div>
            </div>

            <div class="summary-divider"></div>

            <div class="summary-line">
              <span>Sous-total</span>
              <span>{{ total }} FCFA</span>
            </div>

            <div class="summary-line">
              <span>Livraison</span>
              <span>{{ deliveryFee }} FCFA</span>
            </div>

            <div class="summary-divider"></div>

            <div class="summary-line total">
              <span>Total</span>
              <span>{{ getTotalWithDelivery() }} FCFA</span>
            </div>

            <button 
              class="btn btn-primary submit-btn"
              (click)="submitOrder()"
              [disabled]="isProcessing"
            >
              <span *ngIf="!isProcessing">Confirmer la commande</span>
              <span *ngIf="isProcessing">Traitement...</span>
            </button>

            <div class="secure-note">
              üîí Paiement 100% s√©curis√©
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>