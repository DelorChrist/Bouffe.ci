<!-- src/app/pages/role-register/role-register.component.html -->
<div class="role-register-page">
  <div class="register-container">
    
    <!-- Step 1: Role Selection -->
    <div class="role-selection" *ngIf="step === 'role'">
      <div class="selection-header fade-in">
        <h1>Rejoignez Bouffe.Ci</h1>
        <p>Choisissez votre type de compte</p>
      </div>

      <div class="roles-grid">
        <div class="role-card fade-in" (click)="selectRole('user')">
          <div class="role-icon">ğŸ‘¤</div>
          <h3>Client</h3>
          <p>Commander et profiter de nos dÃ©licieux plats</p>
          <ul class="role-features">
            <li>âœ“ Commande en ligne</li>
            <li>âœ“ Suivi de livraison</li>
            <li>âœ“ Historique des commandes</li>
            <li>âœ“ Favoris</li>
          </ul>
          <button class="btn btn-primary">Continuer</button>
        </div>

        <div class="role-card fade-in" style="animation-delay: 0.1s" (click)="selectRole('chef')">
          <div class="role-icon">ğŸ‘¨â€ğŸ³</div>
          <h3>Cuisinier</h3>
          <p>Partagez votre passion et vos recettes</p>
          <ul class="role-features">
            <li>âœ“ Proposer vos plats</li>
            <li>âœ“ GÃ©rer votre menu</li>
            <li>âœ“ Recevoir des commandes</li>
            <li>âœ“ Revenus rÃ©guliers</li>
          </ul>
          <span class="pending-badge">Validation requise</span>
          <button class="btn btn-primary">Postuler</button>
        </div>

        <div class="role-card fade-in" style="animation-delay: 0.2s" (click)="selectRole('livreur')">
          <div class="role-icon">ğŸï¸</div>
          <h3>Livreur</h3>
          <p>Livrez et gagnez en toute flexibilitÃ©</p>
          <ul class="role-features">
            <li>âœ“ Horaires flexibles</li>
            <li>âœ“ Revenus attractifs</li>
            <li>âœ“ Zone de livraison libre</li>
            <li>âœ“ Assurance incluse</li>
          </ul>
          <span class="pending-badge">Validation requise</span>
          <button class="btn btn-primary">Postuler</button>
        </div>
      </div>

      <div class="auth-footer">
        <p>Vous avez dÃ©jÃ  un compte ?</p>
        <button class="btn btn-secondary" (click)="goToLogin()">
          Se connecter
        </button>
      </div>
    </div>

    <!-- Step 2: Registration Form -->
    <div class="registration-form" *ngIf="step === 'form'">
      <button class="back-btn" (click)="backToRoleSelection()">
        â† Retour
      </button>

      <div class="form-header fade-in">
        <div class="selected-role-badge">
          <span class="role-icon">
            {{ selectedRole === 'user' ? 'ğŸ‘¤' : selectedRole === 'chef' ? 'ğŸ‘¨â€ğŸ³' : 'ğŸï¸' }}
          </span>
          <span class="role-name">
            {{ selectedRole === 'user' ? 'Client' : selectedRole === 'chef' ? 'Cuisinier' : 'Livreur' }}
          </span>
        </div>
        <h2>CrÃ©er mon compte</h2>
        <p *ngIf="selectedRole !== 'user'" class="validation-note">
          âš ï¸ Votre compte sera vÃ©rifiÃ© par un administrateur avant activation
        </p>
      </div>

      <div class="alert alert-error" *ngIf="errorMessage">
        {{ errorMessage }}
      </div>

      <form (ngSubmit)="onSubmit()" class="auth-form">
        <!-- Informations de base -->
        <div class="form-section">
          <h3>ğŸ“‹ Informations personnelles</h3>
          
          <div class="form-group">
            <label for="name">Nom complet *</label>
            <input
              type="text"
              id="name"
              [(ngModel)]="formData.name"
              name="name"
              placeholder="Ex: Kouassi Jean"
              required
            />
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="email">Email *</label>
              <input
                type="email"
                id="email"
                [(ngModel)]="formData.email"
                name="email"
                placeholder="votre@email.com"
                required
              />
            </div>

            <div class="form-group">
              <label for="phone">TÃ©lÃ©phone *</label>
              <input
                type="tel"
                id="phone"
                [(ngModel)]="formData.phone"
                name="phone"
                placeholder="+225 XX XX XX XX XX"
                required
              />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="password">Mot de passe *</label>
              <input
                type="password"
                id="password"
                [(ngModel)]="formData.password"
                name="password"
                placeholder="Min. 6 caractÃ¨res"
                required
              />
            </div>

            <div class="form-group">
              <label for="confirmPassword">Confirmer le mot de passe *</label>
              <input
                type="password"
                id="confirmPassword"
                [(ngModel)]="formData.confirmPassword"
                name="confirmPassword"
                placeholder="Retapez votre mot de passe"
                required
              />
            </div>
          </div>
        </div>

        <!-- Section Chef -->
        <div class="form-section" *ngIf="selectedRole === 'chef'">
          <h3>ğŸ‘¨â€ğŸ³ Informations professionnelles</h3>
          
          <div class="form-group">
            <label>SpÃ©cialitÃ©s * (ex: AttiÃ©kÃ©, Foutou, Alloco...)</label>
            <div class="specialty-input">
              <input
                type="text"
                [(ngModel)]="specialtyInput"
                name="specialtyInput"
                placeholder="Ajouter une spÃ©cialitÃ©"
                (keyup.enter)="addSpecialty()"
              />
              <button type="button" class="btn btn-secondary" (click)="addSpecialty()">
                + Ajouter
              </button>
            </div>
            <div class="specialties-list" *ngIf="formData.specialties && formData.specialties.length > 0">
              <span 
                *ngFor="let specialty of formData.specialties; let i = index"
                class="specialty-tag"
              >
                {{ specialty }}
                <button type="button" (click)="removeSpecialty(i)">Ã—</button>
              </span>
            </div>
          </div>

          <div class="form-group">
            <label for="experience">ExpÃ©rience *</label>
            <textarea
              id="experience"
              [(ngModel)]="formData.experience"
              name="experience"
              rows="4"
              placeholder="DÃ©crivez votre expÃ©rience en cuisine (annÃ©es d'expÃ©rience, formations, lieux de travail...)"
              required
            ></textarea>
          </div>
        </div>

        <!-- Section Livreur -->
        <div class="form-section" *ngIf="selectedRole === 'livreur'">
          <h3>ğŸï¸ Informations de livraison</h3>
          
          <div class="form-group">
            <label>Type de vÃ©hicule *</label>
            <div class="vehicle-types">
              <label 
                *ngFor="let vehicle of vehicleTypes"
                class="vehicle-option"
                [class.selected]="formData.vehicleType === vehicle"
              >
                <input
                  type="radio"
                  name="vehicleType"
                  [value]="vehicle"
                  [(ngModel)]="formData.vehicleType"
                />
                <span>{{ vehicle }}</span>
              </label>
            </div>
          </div>

          <h3>ğŸ“„ Documents requis</h3>
          <p class="doc-note">TÃ©lÃ©chargez les photos recto et verso de vos documents</p>

          <div class="documents-grid">
            <!-- PiÃ¨ce d'identitÃ© recto -->
            <div class="document-upload">
              <label class="upload-label">
                <input
                  type="file"
                  accept="image/*"
                  (change)="onFileSelect($event, 'idCardFront')"
                  hidden
                />
                <div class="upload-box" [class.uploaded]="uploadedDocs.idCardFront">
                  <span class="upload-icon">
                    {{ uploadedDocs.idCardFront ? 'âœ“' : 'ğŸ“·' }}
                  </span>
                  <span class="upload-text">
                    {{ uploadedDocs.idCardFront ? 'Photo chargÃ©e' : 'PiÃ¨ce d\'identitÃ© (Recto)' }}
                  </span>
                </div>
              </label>
            </div>

            <!-- PiÃ¨ce d'identitÃ© verso -->
            <div class="document-upload">
              <label class="upload-label">
                <input
                  type="file"
                  accept="image/*"
                  (change)="onFileSelect($event, 'idCardBack')"
                  hidden
                />
                <div class="upload-box" [class.uploaded]="uploadedDocs.idCardBack">
                  <span class="upload-icon">
                    {{ uploadedDocs.idCardBack ? 'âœ“' : 'ğŸ“·' }}
                  </span>
                  <span class="upload-text">
                    {{ uploadedDocs.idCardBack ? 'Photo chargÃ©e' : 'PiÃ¨ce d\'identitÃ© (Verso)' }}
                  </span>
                </div>
              </label>
            </div>

            <!-- Permis recto -->
            <div class="document-upload">
              <label class="upload-label">
                <input
                  type="file"
                  accept="image/*"
                  (change)="onFileSelect($event, 'drivingLicenseFront')"
                  hidden
                />
                <div class="upload-box" [class.uploaded]="uploadedDocs.drivingLicenseFront">
                  <span class="upload-icon">
                    {{ uploadedDocs.drivingLicenseFront ? 'âœ“' : 'ğŸ“·' }}
                  </span>
                  <span class="upload-text">
                    {{ uploadedDocs.drivingLicenseFront ? 'Photo chargÃ©e' : 'Permis de conduire (Recto)' }}
                  </span>
                </div>
              </label>
            </div>

            <!-- Permis verso -->
            <div class="document-upload">
              <label class="upload-label">
                <input
                  type="file"
                  accept="image/*"
                  (change)="onFileSelect($event, 'drivingLicenseBack')"
                  hidden
                />
                <div class="upload-box" [class.uploaded]="uploadedDocs.drivingLicenseBack">
                  <span class="upload-icon">
                    {{ uploadedDocs.drivingLicenseBack ? 'âœ“' : 'ğŸ“·' }}
                  </span>
                  <span class="upload-text">
                    {{ uploadedDocs.drivingLicenseBack ? 'Photo chargÃ©e' : 'Permis de conduire (Verso)' }}
                  </span>
                </div>
              </label>
            </div>
          </div>
        </div>

        <button 
          type="submit" 
          class="btn btn-primary btn-full"
          [disabled]="isLoading"
        >
          <span *ngIf="!isLoading">
            {{ selectedRole === 'user' ? 'CrÃ©er mon compte' : 'Soumettre ma candidature' }}
          </span>
          <span *ngIf="isLoading">Inscription...</span>
        </button>
      </form>
    </div>
  </div>
</div>