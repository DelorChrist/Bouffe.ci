<!-- src/app/pages/profile/profile.component.html -->
<div class="profile-page">
  <div class="container">
    <div class="profile-header fade-in">
      <h1>Mon Profil</h1>
      <p>G√©rez vos informations personnelles</p>
    </div>

    <div class="profile-content">
      <!-- Informations personnelles -->
      <div class="profile-card fade-in">
        <div class="card-header">
          <h2>üë§ Informations personnelles</h2>
          <button 
            class="btn-edit" 
            (click)="toggleEditProfile()"
            *ngIf="!isEditingProfile"
          >
            ‚úèÔ∏è Modifier
          </button>
        </div>

        <div class="alert" [class.alert-success]="profileMessageType === 'success'" 
             [class.alert-error]="profileMessageType === 'error'" 
             *ngIf="profileMessage">
          {{ profileMessage }}
        </div>

        <form *ngIf="!isEditingProfile" class="profile-view">
          <div class="info-row">
            <label>Nom complet</label>
            <span>{{ currentUser?.name }}</span>
          </div>
          <div class="info-row">
            <label>Email</label>
            <span>{{ currentUser?.email }}</span>
          </div>
          <div class="info-row">
            <label>T√©l√©phone</label>
            <span>{{ currentUser?.phone }}</span>
          </div>
          <div class="info-row">
            <label>Adresse</label>
            <span>{{ currentUser?.address || 'Non renseign√©e' }}</span>
          </div>
        </form>

        <form *ngIf="isEditingProfile" class="profile-edit" (ngSubmit)="saveProfile()">
          <div class="form-group">
            <label for="name">Nom complet *</label>
            <input
              type="text"
              id="name"
              [(ngModel)]="profileForm.name"
              name="name"
              required
            />
          </div>

          <div class="form-group">
            <label for="email">Email *</label>
            <input
              type="email"
              id="email"
              [(ngModel)]="profileForm.email"
              name="email"
              required
            />
          </div>

          <div class="form-group">
            <label for="phone">T√©l√©phone *</label>
            <input
              type="tel"
              id="phone"
              [(ngModel)]="profileForm.phone"
              name="phone"
              required
            />
          </div>

          <div class="form-group">
            <label for="address">Adresse compl√®te</label>
            <textarea
              id="address"
              [(ngModel)]="profileForm.address"
              name="address"
              rows="3"
              placeholder="Commune, quartier, rep√®res..."
            ></textarea>
          </div>

          <div class="form-actions">
            <button 
              type="button" 
              class="btn btn-secondary"
              (click)="toggleEditProfile()"
            >
              Annuler
            </button>
            <button 
              type="submit" 
              class="btn btn-primary"
              [disabled]="isLoadingProfile"
            >
              <span *ngIf="!isLoadingProfile">Enregistrer</span>
              <span *ngIf="isLoadingProfile">Enregistrement...</span>
            </button>
          </div>
        </form>
      </div>

      <!-- S√©curit√© -->
      <div class="profile-card fade-in" style="animation-delay: 0.2s">
        <div class="card-header">
          <h2>üîí S√©curit√©</h2>
          <button 
            class="btn-edit" 
            (click)="toggleEditPassword()"
            *ngIf="!isEditingPassword"
          >
            üîë Changer le mot de passe
          </button>
        </div>

        <div class="alert" [class.alert-success]="passwordMessageType === 'success'" 
             [class.alert-error]="passwordMessageType === 'error'" 
             *ngIf="passwordMessage">
          {{ passwordMessage }}
        </div>

        <div *ngIf="!isEditingPassword" class="security-info">
          <p>Votre mot de passe a √©t√© modifi√© pour la derni√®re fois lors de votre inscription.</p>
          <p class="security-tip">üí° Conseil : Changez votre mot de passe r√©guli√®rement pour plus de s√©curit√©.</p>
        </div>

        <form *ngIf="isEditingPassword" class="profile-edit" (ngSubmit)="changePassword()">
          <div class="form-group">
            <label for="currentPassword">Mot de passe actuel *</label>
            <input
              type="password"
              id="currentPassword"
              [(ngModel)]="passwordForm.currentPassword"
              name="currentPassword"
              required
            />
          </div>

          <div class="form-group">
            <label for="newPassword">Nouveau mot de passe *</label>
            <input
              type="password"
              id="newPassword"
              [(ngModel)]="passwordForm.newPassword"
              name="newPassword"
              placeholder="Min. 6 caract√®res"
              required
            />
          </div>

          <div class="form-group">
            <label for="confirmPassword">Confirmer le nouveau mot de passe *</label>
            <input
              type="password"
              id="confirmPassword"
              [(ngModel)]="passwordForm.confirmPassword"
              name="confirmPassword"
              required
            />
          </div>

          <div class="form-actions">
            <button 
              type="button" 
              class="btn btn-secondary"
              (click)="toggleEditPassword()"
            >
              Annuler
            </button>
            <button 
              type="submit" 
              class="btn btn-primary"
              [disabled]="isLoadingPassword"
            >
              <span *ngIf="!isLoadingPassword">Changer</span>
              <span *ngIf="isLoadingPassword">Changement...</span>
            </button>
          </div>
        </form>
      </div>

      <!-- Zone dangereuse -->
      <div class="profile-card danger-zone fade-in" style="animation-delay: 0.3s">
        <div class="card-header">
          <h2>‚ö†Ô∏è Zone dangereuse</h2>
        </div>
        <p>La suppression de votre compte est d√©finitive et irr√©versible.</p>
        <button class="btn btn-danger" (click)="deleteAccount()">
          Supprimer mon compte
        </button>
      </div>
    </div>
  </div>
</div>